<!DOCTYPE html>
<html>

<head>
    <title>Home | Simple HTML Template</title>
    <link rel="stylesheet" href="style.css">
    <script type="text/javascript">
        (function(i, s, o, g, r, a, m, n) {
            i.moengage_object = r;
            t = {};
            q = function(f) {
                return function() {
                    (i.moengage_q = i.moengage_q || []).push({
                        f: f,
                        a: arguments
                    })
                }
            };
            f = ['track_event', 'add_user_attribute', 'add_first_name', 'add_last_name', 'add_email', 'add_mobile', 'add_user_name', 'add_gender', 'add_birthday', 'destroy_session', 'add_unique_user_id', 'moe_events', 'call_web_push', 'track', 'location_type_attribute'], h = {
                onsite: ["getData", "registerCallback"]
            };
            for (k in f) {
                t[f[k]] = q(f[k])
            }
            for (k in h)
                for (l in h[k]) {
                    null == t[k] && (t[k] = {}), t[k][h[k][l]] = q(k + "." + h[k][l])
                }
            a = s.createElement(o);
            m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
            i.moe = i.moe || function() {
                n = arguments[0];
                return t
            };
            a.onload = function() {
                if (n) {
                    i[r] = moe(n)
                }
            }
        })(window, document, 'script', 'https://cdn.moengage.com/webpush/moe_webSdk.min.latest.js', 'Moengage')

        Moengage = moe({
            app_id: "Y03N5SVIVAU7KQ29BEIKUGJA",
            debug_logs: 1,
            cluster: "DC_3"
        });

    </script>

</head>

<body>
    <div id="container">
<p>Please select a reason to Unsubscribe</p>
                    <input type="checkbox" id="1" name="1" value="Mails not relevant">
                    <label for="1"> Mails not Relevant</label><br>
                    <input type="checkbox" id="2" name="2" value="I did not subscribe">
                    <label for="2"> I did not subscribe</label>
                    <input type = submit id="Allow">
    </div>
    <script>
        var getUrlParameter = function getUrlParameter(sParam) {
    var sPageURL = window.location.search.substring(1),
        sURLVariables = sPageURL.split('&'),
        sParameterName,
        i;

    for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');

        if (sParameterName[0] === sParam) {
            return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
        }
    }
    return false;
};
        
        var ID = getUrlParameter('ID');
        document.getElementById("Allow").onclick = function() {
            myFunction()
        };

        function myFunction() {
            Moengage.add_unique_user_id(ID);
            Moengage.add_user_attribute("moe_unsubscribe", true);
            if (document.getElementById('1').checked) {
            Moengage.add_user_attribute("Reason for unsubscription", document.getElementById('1').value);
                Moengage.track_event("Unsub Reason", {
                                                 "reason":document.getElementById('1').value
                                               
 });
            }else if (document.getElementById('2').checked) {
                Moengage.add_user_attribute("PC Subscription", document.getElementById('2').value);
            
            Moengage.track_event("Unsub Reason", {
                                                 "reason":document.getElementById('2').value
                                               
 });
        }}
        

       

    </script>

</body>

</html>
